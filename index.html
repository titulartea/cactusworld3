<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Cactus World</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <header>
      <h1>CACTUS WORLD</h1>
      <!-- 상단의 🌵 버튼을 클릭하면 업로드 메뉴 모달이 열림 -->
      <button id="uploadBtn">🌵</button>
    </header>

    <!-- 추천 사진 캐러셀 (갤러리 위) -->
    <div id="carousel-container">
      <!-- 배경 이미지 (블러/어둡게 처리) -->
      <div id="carousel-bg"></div>
      <div id="carousel"></div>
      <button class="carousel-arrow left" id="prevCarousel">❮</button>
      <button class="carousel-arrow right" id="nextCarousel">❯</button>
    </div>

    <!-- 갤러리 -->
    <div id="gallery"></div>
    <button id="loadMoreBtn" style="display: none">더 보기</button>

    <!-- 통합 업로드/관리 모달 (탭 전환) -->
    <div id="mainModal" class="modal">
      <div class="modal-content upload-modal">
        <span class="close" id="closeMainModal">&times;</span>
        <!-- 탭 버튼 -->
        <div class="tab-buttons">
          <button class="tab-btn active" data-tab="galleryTab">
            갤러리 업로드
          </button>
          <button class="tab-btn" data-tab="recTab">추천 사진 관리</button>
        </div>
        <!-- 탭 내용: 갤러리 업로드 -->
        <div class="tab-content" id="galleryTab">
          <h2>갤러리 업로드</h2>
          <input
            type="password"
            id="password"
            placeholder="비밀번호를 입력하세요"
          />
          <input type="file" id="fileInput" />
          <textarea
            id="description"
            placeholder="사진 소개를 입력하세요"
          ></textarea>
          <button id="submitBtn">업로드</button>
        </div>
        <!-- 탭 내용: 추천 사진 관리 -->
        <div class="tab-content" id="recTab" style="display: none">
          <h2>추천 사진 관리</h2>
          <!-- 추천 사진 업로드 폼 -->
          <div class="rec-upload">
            <input
              type="password"
              id="recPassword"
              placeholder="비밀번호를 입력하세요"
            />
            <input type="file" id="recFileInput" />
            <textarea
              id="recDescription"
              placeholder="추천 사진 소개를 입력하세요"
            ></textarea>
            <button id="submitRecBtn">추천 사진 업로드</button>
          </div>
          <!-- 저장된 추천 사진 목록 (삭제 버튼 포함) -->
          <div id="recList">
            <!-- 추천 사진 목록은 JS에서 동적으로 생성됩니다. -->
          </div>
        </div>
      </div>
    </div>

    <!-- 이미지 확대 모달 (갤러리 내 이미지 클릭 시) -->
    <div id="imageModal" class="modal">
      <div class="modal-content image-modal">
        <span class="close" id="closeImageModal">&times;</span>
        <img id="modalImage" src="" alt="확대된 이미지" />
        <p id="imageDescription"></p>
        <!-- 옵션 버튼: 사진 옵션 모달을 열기 위한 트리거 -->
        <button
          id="openOptionBtn"
          class="modal-close-btn"
          style="margin-top: 10px"
        >
          :
        </button>
        <button id="closeImageBtn" class="modal-close-btn">⨉</button>
      </div>
      <div class="arrow left" id="prevBtn">❮</div>
      <div class="arrow right" id="nextBtn">❯</div>
    </div>

    <!-- 사진 옵션 모달 (수정/삭제 옵션 전용) -->
    <div id="editDeleteModal" class="modal" style="display: none">
      <div
        class="modal-content edit-delete-modal"
        style="width: 300px; padding: 20px; text-align: center"
      >
        <span
          class="close"
          id="closeEditDeleteModal"
          style="float: right; cursor: pointer"
          >&times;</span
        >
        <h3>사진 옵션</h3>
        <button id="editPhotoBtnOption">수정</button>
        <button id="deletePhotoBtnOption">삭제</button>
        <div id="module">
          <!-- 나가기 버튼 -->
          <button id="exitButton" class="modal-btn exit-btn">
            나가기 없어도 됨
          </button>
        </div>
      </div>
    </div>

    <!-- 수정 시 파일 교체를 위한 숨김 파일 입력 -->
    <input type="file" id="editFileInput" style="display: none" />

    <!-- Supabase 라이브러리 -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js"></script>
    <script src="script.js"></script>
  </body>
</html>
